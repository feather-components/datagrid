<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--<link rel="stylesheet" href="../liger-common.css">-->
    <!--<link rel="stylesheet" href="../ligerui-grid2.css">-->
    <link rel="stylesheet" href="../index.css">
    <link rel="stylesheet" href="../../bower_components/pager/index.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="../cus/demo2.css">
    <title>Title</title>
</head>
<body>
<div class="main">
    <div id="maingrid" style="margin: 0; padding: 0">
    </div>
</div>
<div class="main">
    <div id="maingrid2" style="margin: 0; padding: 0">
    </div>
</div>


<script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
<script type="text/javascript" src="../../bower_components/class/index.js"></script>
<script type="text/javascript" src="../../bower_components/pager/index.js"></script>
<script src="../ligerui.all.js"></script>
<!--<script type="text/javascript" src="demo2.js"></script>-->
<!--<script type="text/javascript" src="demo2.1.js"></script>-->
<!--<script type="text/javascript" src="demo1.js"></script>-->
<!--<script type="text/javascript" src="treeData.js"></script>-->
<!--<script type="text/javascript" src="AllOrdersData.js"></script>-->

<script src="../index.js"></script>

<script>
    $("#maingrid").datagrid({
       /*
       * columns列参数
       * isScroll 是否滚动
       * data 数据
       * headerRowHeight 头部高度
       * rowHeight 行高度
       * fixedCellHeight 锁定咧高度
       * usePager 为false
       * showToggleColBtn 初始化是否展开
       * sort 排序
       * width 宽度
       * height 高度
       * */
        columns: [
            {
                label:"勾选", //列名
                key:"checkBox",   //键名
                sort:false, //是否排序
                width:"5%",  //宽度
                fixed:false, //是否锁定
                format:function (row) {
                    return  '<input type ="checkbox" rowid ="' + row.id + '">';
                },
            },
            {
                label:"顾客", //列名
                key:"CustomerID",   //键名
                sort:true, //是否排序
                width:"14.28%",  //宽度
                fixed:false, //是否锁定
            },
            {
                label:"公司名", //列名
                key:"CompanyName",   //键名
                sort:true, //是否排序
                width:"14.28%",  //宽度
                fixed:false, //是否锁定
            },
            {
                label:"联系人", //列名
                key:"ContactName",   //键名
                sort:true, //是否排序
                width:"14.28%",  //宽度
                fixed:false, //是否锁定

            },
            {
                label:"地址", //列名
                key:"Address",   //键名
                sort:true, //是否排序
                width:"14.28%",  //宽度
                fixed:false, //是否锁定

            },
            {
                label:"邮编", //列名
                key:"PostalCode",   //键名
                sort:true, //是否排序
                fixed: false,
                width:"14.28%",  //宽度

            },
            {
                label:"城市", //列名
                key:"City",   //键名
                sort:false, //是否排序
                width:"20%",  //宽度
                fixed:false, //是否锁定
            },
            {
                label:"操作", //列名
                key:"do",   //键名
                sort:false, //是否排序
//                width:"10%",  //宽度
                fixed:false, //是否锁定
                format:function (row) {
                    return  "<input type='text'/>"
                }
            },

        ],

        source: {
            ajaxUrl:"./a.json" ,
            type:"post",
            requestData: {
                a:"qeqwe",
                id:"555",
                name:"55kai",
                iPager:4,
                iPerPage:"12"
            },
            dataRowsField:"List",
            dataTotalField:"Total",
            perPager:"iPerPage",
            currentPageField:"iPager",
        },

        height:500,
        children:{
            showDetail:function(row, detailPanel,callback){
                f_showOrder(row, detailPanel,callback);
            },
            height:"auto",
            closeDetail:function () {

            }
        }

//        scrollY:        100,
//        scrollX:        true,
//
//        fixedColumns:[1,1],

    }).on("datagrid:aftershowdata",function (event,data) {
        console.log(event,data,12345)
    }).on("datagrid:onbeforeshowdata",function (event,data) {
        console.log(event,data,23456)
    });


    //显示子表格案例
    function f_showOrder(row, detailPanel,callback)
    {
//        console.log(row, detailPanel,callback);
        var grid = document.createElement('div');
//console.log($(detailPanel).parents(".l-grid").first().find(".l-grid2 >.l-grid-body-table"),18723123123819028390);
//        $(detailPanel).parents(".l-grid").first().find(".l-grid2 > tbody").find(".l-grid-detailpanel-inner").eq(row.__index).append(grid);
        $(detailPanel).append(grid);
        $(grid).css('margin',10).datagrid({
            columns:
                    [

                        { label: '订单序号', key: 'OrderID', width:100 },
                        { label: '运费', key: 'Freight',  width:100 },
                        { label: '收货人', key: 'ShipName' , width:100 },
                        { label: '收货地址', key: 'ShipAddress' ,  width:100},
                        { label: '收货城市', key: 'ShipCity' ,  width:100},
                        { label: '收货国家', key: 'ShipCountry' ,  width:100}
                    ],
            source: {
                ajaxUrl:"./AllOrdersData.json" ,
                type:"post",
                requestData: {
                    a:"qeqwe",
                    id:"555",
                    name:"55kai",
                    iPager:4,
                    iPerPage:"12"
                },
                dataRowsField:"Rows",
                dataTotalField:"Total",
                perPager:"iPerPage",
                currentPageField:"iPager",
            },

        });
//        $(grid).css('margin',10).ligerGrid({
//            columns:
//                    [
//                        { display: '订单序号', name: 'OrderID',type:'float' },
//                        { display: '运费', name: 'Freight', width: 50,type:'float' },
//                        { display: '收货人', name: 'ShipName' },
//                        { display: '收货地址', name: 'ShipAddress' },
//                        { display: '收货城市', name: 'ShipCity' },
//                        { display: '收货国家', name: 'ShipCountry' }
//                    ], isScroll: false, showToggleColBtn: false, width: '90%',
//            data: f_getOrdersData(row.CustomerID) , showTitle: false, columnWidth: 100
//            , onAfterShowData: callback,frozen:false
//        });
    }


    $("#maingrid2").datagrid({

        columns: [
            { label: '部门名', key: 'name', id: 'id1', width: 250, align: 'left' },
            { label: '部门标示', key: 'id', width: 250, type: 'int', align: 'left' },

            { label: '部门描述', key: 'remark', width: 250, align: 'left' }
        ],
        source: {
            ajaxUrl:"./tree.json" ,
            type:"post",
            requestData: {
                a:"qeqwe",
                id:"555",
                name:"55kai",
                iPager:4,
                iPerPage:"12"
            },
            dataRowsField:"Rows",
            dataTotalField:"Total",
            perPager:"iPerPage",
            currentPageField:"iPager",
        },
        width: '100%',tree: { columnId: 'id1', usePager:false},

    })
</script>
</body>
</html>